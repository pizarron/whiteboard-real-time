<!DOCTYPE html>
<html>
    <!-- Head -->
    <head>
        <script src="js/socket.io.js"></script>
        <script src="js/jquery.min.js"></script>
        <script type="text/javascript">
            /* Socket.io */
            var socketChat = io.connect("http://localhost:9090/chat"); // Socket Chat
            var socketWBoard = io.connect("http://localhost:9090/wboard"); // Socket Whiteboard
            socketWBoard.on('receive_datas', function(datas){
                console.log(JSON.stringify(datas));
                $('#chatLog').append(JSON.stringify(datas));
                $('#chatLog').append($('<br />'));
            });
            /* Javascript */
            function JoinToRoom(){
                var room = $('#sltCourseClass').val();
                socketWBoard.emit('join_room', room);
            }
            function LeaveRoom(){
                var room = $('#sltCourseClass').val();
                socketWBoard.emit('leave_room', room);
            }
            function SendData(){
                var currentRoom = $('#sltCourseClass').val();
                var user = $('#txtUserName').val();
                var datas = $('#txtMessageContent').val();
                socketWBoard.emit('send_data', { room : currentRoom, data: user + ': ' + datas});
            }
//            function sendUserName() {
//                var userName = $("#txtUserName").val();
//                if (userName) {
//                    var user = {"name": userName , "country": "Bolivia"};
//                    socketWBoard.emit("set_user", user);
//                }
//            }
//            function sendMessage() {
//                var messageContent = $("#txtMessageContent").val();
//                if (messageContent) {
//                    var message = {"content": messageContent};
//                    socketWBoard.send(message);
//                }
//            }
        </script>
    </head>
    <!-- Body -->
    <body>
        <h1>Whiteboard client</h1>
        Name:
        <input type="text" id="txtUserName" /><br/>
        Course class:
        <select id="sltCourseClass">
            <option value="room001">Room 1</option>
            <option value="room002">Room 2</option>
            <option value="room003">Room 3</option>
        </select>
        <input type="button" value="Join a class" onclick="JoinToRoom()" />
        <br />
        <textarea id="txtMessageContent"></textarea>
        <input type="button" value="Send message" onclick="SendData()" />
        <br />
        <div id="chatLog"></div>
    </body>
</html>